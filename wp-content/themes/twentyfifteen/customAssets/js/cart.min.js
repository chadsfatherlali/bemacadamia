(function(a){function e(){var b={},c=a("#form-compra-datos-usuario").serializeArray();a.each(c,function(a,c){b[c.name]=c.value});return b}var g=function(){var b=4,c=a(".precios"),d=0;a.each(c,function(b,c){var e=d,f=a(c).html().replace(",","."),f=parseFloat(f);d=e+f});0==d&&(b=0,window.top.location="/shop");a("#full-total").html((d+b).toString().replace(".",",")+"\u20ac");a("#sub-total").html(d.toString().replace(".",",")+"\u20ac")};g();a(".toTrash").on("click",function(){var b=a(this).attr("data-trash");
a.post("/vendor/cart/cart.php?accion=delete",{accion:"delete",id:b,hash:a.cookie("cart")},function(c){"ko"==c?alert("Se ha producido un error"):(a("#producto-info-"+b).remove(),setTimeout(function(){var b=0;a.each(c,function(a,c){b=~~b+~~c.cantidad});a("#total-cesta-prodcutos").html(b);g()},500))})});a("#editar-info").on("click",function(){a(".payment-method-1, .payment-method-2").removeClass("next")});$form=a("#form-compra-datos-usuario");$form.submit(function(a){a.preventDefault()}).validate({submitHandler:function(){a(".payment-method-1").addClass("next");
a(".payment-method-2").addClass("next");var b=e();a("#nombre-edit").html(b.nombre);a("#apellido-edit").html(b.apellido);a("#email-edit").html(b.email);a("#direccion-edit").html(b.direccion);a("#cpostal-edit").html(b.cpostal);a("#ciudad-edit").html(b.ciudad);a("#telefono-edit").html(b.telefono)},ignore:[],rules:{email:{required:!0,email:!0},nombre:{required:!0,minlength:4},apellido:{required:!0,minlength:4},direccion:{required:!0},ciudad:{required:!0},cpostal:{required:!0,number:!0,minlength:5},telefono:{number:!0,
minlength:9}},messages:{email:{required:"Es necesario que introduzca un email",emai:"Por favor revise su email ej: ejemplo@dominio.com"},nombre:{required:"Por favor introduzca su nombre",minlength:"Por favor introduzca un nombre v\u00e1lido"},apellido:{required:"Por favor introduzca su nombre",minlength:"Por favor introduzca un apellido v\u00e1lido"},direccion:{required:"Por favor introduzca una direcci\u00f3n"},ciudad:{required:"Por favor introduzca una ciudad"},cpostal:{required:"Por favor introduzca su c\u00f3digo postal",
number:"Solo se admite n\u00fameros",minlegth:"El c\u00f3digo postal debe tener como m\u00ednimo 5 n\u00fameros"},telefono:{number:"Solo se admite n\u00fameros",minlength:"El n\u00famero de tel\u00e9fono debe constar de 9 n\u00fameros"}}});a("#doPayment").on("click",function(){$pagos=a(".pagos");if($pagos.is(":checked")){var b=a("#pago1"),c=a("#pago2"),d=e();d.pago=b.is(":checked")?b.val():c.val();d.hash=a.cookie("cart");a.post("/vendor/pagos/pagos.php",d,function(b){"ok"==b?(a("#modal-pago4").modal("show"),
a.removeCookie("cart",{path:"/",domain:host}),setTimeout(function(){window.top.location="/"},5E3)):alert("Se ha producido un error.")})}else a("#modal-pago3").modal("show")})})(jQuery);
